//////////////////////////////////////////////////////////////////////////////////////////
//                                                                                      //
//                   (C) VESTA 2020 - Planbureau voor de Leefomgeving                   //
//                                                                                      //
//////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////
//                                                                                      //
//       Deze DMS-file wordt aangeroepen door ScenarioSpecs.dms.                        //
//       In deze configuratiefile wordt de Nieuwbouw geconfigureerd.                    //
//       Nieuwbouw is gedefinieerd als nieuwe bebouwing in nieuwe gebieden).            //
//                                                                                      //
//////////////////////////////////////////////////////////////////////////////////////////

template WloTiffNieuwbouw
{
	Container Woning := for_each_ne(Classifications/Periode/name
			,  Classifications/Periode/hasNieuwbouw
			? 'CalculationSchemes/NieuwbouwUnite(PerGrid/' + Classifications/Periode/name+ ', Classifications/WoningtypeNieuwbouw, Classifications/Periode/Eindjaar[Classifications/Periode/V/'+Classifications/Periode/name+'])'
			: 'CalculationSchemes/LegeBebouwingsComponent(Classifications/WoningtypeNieuwbouw)'
			)
	{
		container PerGrid := for_each_ne(Classifications/combines/PeriodeWonen/hasNieuwbouw ? Classifications/combines/PeriodeWonen/name : ''
				, 'CalculationSchemes/NieuwbouwWoningOperaties/Select(Invoer/RuimtelijkeData/Nieuwbouw/Woning/' + Classifications/combines/PeriodeWonen/name + 
				  '[nrAsl], value(' + string(Classifications/combines/PeriodeWonen/WoningtypeNieuwbouw_rel) + ', Classifications/WoningtypeNieuwbouw) '+
				  ', value(' + string(Classifications/combines/PeriodeWonen/nrJaren )+ ',units/yr)'+
				  ')'
				);
	}

	Container Utiliteit := for_each_ne(Classifications/Periode/name
			,  Classifications/Periode/hasNieuwbouw
			? 'CalculationSchemes/NieuwbouwUnite(PerGrid/' + Classifications/Periode/name+ ', Classifications/UtilTypeNieuwbouw)'
			: 'CalculationSchemes/LegeBebouwingsComponent(Classifications/UtilTypeNieuwbouw)'
			)
	{
		container PerGrid := for_each_ne(Classifications/combines/PeriodeUtiliteit/hasNieuwbouw ?  Classifications/combines/PeriodeUtiliteit/name : ''
				, 'CalculationSchemes/NieuwbouwUtilOperaties/Select(NieuwbouwUtil/' + Classifications/combines/PeriodeUtiliteit/name + 
				  ', ' + quote(Classifications/combines/PeriodeUtiliteit/utiliteit_Name) + 
				  ', value(' + string(Classifications/combines/PeriodeUtiliteit/nrJaren)+ ',units/yr)'+
				  ')'
				);
	}
}